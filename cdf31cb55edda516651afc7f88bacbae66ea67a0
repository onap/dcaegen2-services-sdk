{
  "comments": [
    {
      "key": {
        "uuid": "8d9ccd05_8ecabaa5",
        "filename": "rest-services/dmaap-client/src/main/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImpl.java",
        "patchSetId": 5
      },
      "lineNbr": 83,
      "author": {
        "id": 2683
      },
      "writtenOn": "2019-05-30T10:17:17Z",
      "side": 1,
      "message": "What if content type is \"application/json; charset\u003dutf-8\"? Maybe we shall move ContentType enum to the model and use it directly in our public API so we force clients to use predefined content types?\n\nDoes DMaaP MR support different content types? If the behavior is special only for Json then maybe we should define abstract class ContentType with subclass JsonContentType (singleton) and let\u0027s say OtherContentType(type: String). In Kotlin it would be easier:\n\nsealed class ContentType(val mime: String)\nobject JsonContentType : ContentType(\"application/json\")\nclass OtherContentType(mime: String): ContentType(mime)",
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a133b280_6d6e2218",
        "filename": "rest-services/dmaap-client/src/main/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImpl.java",
        "patchSetId": 5
      },
      "lineNbr": 83,
      "author": {
        "id": 3789
      },
      "writtenOn": "2019-05-30T10:46:37Z",
      "side": 1,
      "message": "Filip suggested using ContentType enum in public API, but also said that maybe it would be better to make that change in new MR. \nBut, of course, I can do it here.\n\nAs far as I know (I was checking `readthedocks` and instructions), MR support exactly 2 content types: \u0027application/json\u0027 and \u0027text.plain\u0027",
      "parentUuid": "8d9ccd05_8ecabaa5",
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83f91866_9466ec22",
        "filename": "rest-services/dmaap-client/src/main/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImpl.java",
        "patchSetId": 5
      },
      "lineNbr": 83,
      "author": {
        "id": 2683
      },
      "writtenOn": "2019-05-30T11:02:35Z",
      "side": 1,
      "message": "OK. We may do it in separate MR. But please create a task on the board so we\u0027ll have this deal written down ;)",
      "parentUuid": "a133b280_6d6e2218",
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c97e8b0f_e454febb",
        "filename": "rest-services/dmaap-client/src/main/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImpl.java",
        "patchSetId": 5
      },
      "lineNbr": 83,
      "author": {
        "id": 3789
      },
      "writtenOn": "2019-06-06T07:12:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "83f91866_9466ec22",
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0eacd243_3e909e82",
        "filename": "rest-services/dmaap-client/src/main/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImpl.java",
        "patchSetId": 5
      },
      "lineNbr": 94,
      "author": {
        "id": 2683
      },
      "writtenOn": "2019-05-30T10:17:17Z",
      "side": 1,
      "message": "Is this really what we want? Shouldn\u0027t we replace `\\\"` with `\"` ?",
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "450bc116_5fda029d",
        "filename": "rest-services/dmaap-client/src/main/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImpl.java",
        "patchSetId": 5
      },
      "lineNbr": 94,
      "author": {
        "id": 3789
      },
      "writtenOn": "2019-05-30T10:46:37Z",
      "side": 1,
      "message": "If we want to send multiple messages with `text/plain`, content should look like\n\"message1\nmessage2\nmessage3\"\n\nMessageRouter figures out that we are sending multiple messages only if we split them with new line. So we should send one multi-line String (as far as I understand)",
      "parentUuid": "0eacd243_3e909e82",
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "faed6164_85953c60",
        "filename": "rest-services/dmaap-client/src/main/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImpl.java",
        "patchSetId": 5
      },
      "lineNbr": 94,
      "author": {
        "id": 3789
      },
      "writtenOn": "2019-05-30T11:00:32Z",
      "side": 1,
      "message": "One multi-line String without inner quotes around single messages",
      "parentUuid": "450bc116_5fda029d",
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3bdd6bf7_c205bfbe",
        "filename": "rest-services/dmaap-client/src/main/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImpl.java",
        "patchSetId": 5
      },
      "lineNbr": 94,
      "author": {
        "id": 2683
      },
      "writtenOn": "2019-05-30T11:02:35Z",
      "side": 1,
      "message": "Ok. I understand this interleave-with-endl stuff. But what about quotes?\n\nMy understanding (I use kotlin \"\"\" syntax to avoid ambiguity):\n\nInput List\u003cJsonElement\u003e:\nList[JsonElem{\"name\":\"Wiesio\"}, JsonElem{\"name\":\"Czesio\"}]\n\nAfter mapping over JsonElement::toString (is this correct?):\nList[\"\"\"{\"name\":\"Wiesio\"}\"\"\", \"\"\"{\"name\":\"Czesio\"}\"\"\"]\n\nThen we collect with interleaving:\n\"\"\"{\"name\":\"Wiesio\"}\n{\"name\":\"Czesio\"}\"\"\"\n\nAfter replaceAll:\n\"\"\"{name:Wiesio}\n{name:Czesio}\"\"\"\n\nwhich is not a correct Json, isn\u0027t it?",
      "parentUuid": "450bc116_5fda029d",
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bed57369_541de2ad",
        "filename": "rest-services/dmaap-client/src/main/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImpl.java",
        "patchSetId": 5
      },
      "lineNbr": 94,
      "author": {
        "id": 3789
      },
      "writtenOn": "2019-05-30T11:23:45Z",
      "side": 1,
      "message": "Yes, that Json would be incorrect. \nFirstly I thought that this is what MessageRouter does - removes quotes from Json if it\u0027s send with `text/plain`. I thought that, because:\n\n\ncurl --header \"Content-type: text/plain\" --request POST --data \"{\"message\":\"jakisMessage\"}\" http://localhost:3904/events/pnfReady\n\n\nif I make get request now, the result is:\n\n[\"{message:jakisMessage}\"]\n\n\n\n\nBut I\u0027ve just formatted curl differently:\n\ncurl --header \"Content-type: text/plain\" --request POST --data \u0027{\"message\":\"jakisMessage\"}\u0027 http://localhost:3904/events/pnfReady\n\n(used apostrophe instead of quotes)\nand when making get request:\n\n[\"{\\\"message\\\":\\\"jakisMessage\\\"}\"]\n\n\n\nSo, I understand that in that situation I should send correct json? ;)",
      "parentUuid": "3bdd6bf7_c205bfbe",
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fed5c26a_b43280a4",
        "filename": "rest-services/dmaap-client/src/main/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImpl.java",
        "patchSetId": 5
      },
      "lineNbr": 94,
      "author": {
        "id": 3789
      },
      "writtenOn": "2019-06-06T08:38:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bed57369_541de2ad",
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "46330442_e740753d",
        "filename": "rest-services/dmaap-client/src/test/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/api/MessageRouterSubscriberCIT.java",
        "patchSetId": 5
      },
      "lineNbr": 92,
      "author": {
        "id": 2683
      },
      "writtenOn": "2019-05-30T10:17:17Z",
      "side": 1,
      "message": "Maybe rename it to subscriber. Here System Under Test is both publisher and subscriber.",
      "range": {
        "startLine": 92,
        "startChar": 36,
        "endLine": 92,
        "endChar": 39
      },
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "05bfdbec_56ad461e",
        "filename": "rest-services/dmaap-client/src/test/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/api/MessageRouterSubscriberCIT.java",
        "patchSetId": 5
      },
      "lineNbr": 92,
      "author": {
        "id": 3789
      },
      "writtenOn": "2019-06-06T07:12:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "46330442_e740753d",
      "range": {
        "startLine": 92,
        "startChar": 36,
        "endLine": 92,
        "endChar": 39
      },
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "100392d9_334bf4f0",
        "filename": "rest-services/dmaap-client/src/test/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImplTest.java",
        "patchSetId": 5
      },
      "lineNbr": 78,
      "author": {
        "id": 2683
      },
      "writtenOn": "2019-05-30T10:17:17Z",
      "side": 1,
      "message": "Please move these variables into corresponding methods. Flux can be a single shot instances (after completion re-subscription may not be possible).\n\nAlso consider moving the lists above also int test methods. Keeping them closer to the test may improve readability. On the other hand you\u0027ve named it well so it shouldn\u0027t be a problem.",
      "range": {
        "startLine": 74,
        "startChar": 3,
        "endLine": 78,
        "endChar": 66
      },
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c534481_0af3c9ad",
        "filename": "rest-services/dmaap-client/src/test/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImplTest.java",
        "patchSetId": 5
      },
      "lineNbr": 78,
      "author": {
        "id": 2683
      },
      "writtenOn": "2019-05-30T11:02:35Z",
      "side": 1,
      "message": "One comment here: It will work (and is working of course :) ), but maybe we should keep these sample data closer to the methods. Just thinking.",
      "parentUuid": "100392d9_334bf4f0",
      "range": {
        "startLine": 74,
        "startChar": 3,
        "endLine": 78,
        "endChar": 66
      },
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf3fffd3_3edb2904",
        "filename": "rest-services/dmaap-client/src/test/java/org/onap/dcaegen2/services/sdk/rest/services/dmaap/client/impl/MessageRouterPublisherImplTest.java",
        "patchSetId": 5
      },
      "lineNbr": 78,
      "author": {
        "id": 3789
      },
      "writtenOn": "2019-06-06T07:12:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1c534481_0af3c9ad",
      "range": {
        "startLine": 74,
        "startChar": 3,
        "endLine": 78,
        "endChar": 66
      },
      "revId": "cdf31cb55edda516651afc7f88bacbae66ea67a0",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    }
  ]
}